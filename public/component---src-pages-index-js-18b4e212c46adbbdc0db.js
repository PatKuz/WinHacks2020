(self.webpackChunkclass_connect=self.webpackChunkclass_connect||[]).push([[678],{2719:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var o=n(2137),r=n(3552),a=n(7757),s=n.n(a),i=n(7294),l=n(9),c=n(5444),u=n(434),m=n(3388),d=n(5761),f=n(8630),p=n(6544),g=n(6428),h=n.p+"static/pattern_3-cc394dbce1344a03a3f87d3c5eaaa3e1.svg",E=(0,l.default)(m.zw).withConfig({displayName:"pages__StyledCentered",componentId:"sc-1nlguj-0"})(["background:url(",");"],h),b=function(e){function t(t){var n;return(n=e.call(this,t)||this).loadData=(0,o.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n._initFirebase=!0,e.next=3,new Promise((function(e,t){var o=function(t){o=function(){return null},e(t)};n.unsubRooms=n.props.firebase.rooms().onSnapshot((function(e){var t=e.docs.map((function(e){return Object.assign({id:e.id},e.data())}));n.setState({rooms:t}),o(t)}),t)}));case 3:e.sent;case 4:case"end":return e.stop()}}),e)}))),n.setRoomCode=function(e){n.setState({roomCode:e})},n.setErrorMsg=function(e){n.setState({errorMsg:e}),n.forceUpdate()},n.attemptLogin=function(e,t){n.props.firebase.doSignInWithEmail(e,t).then((function(){(0,c.c4)("/control-panel")})).catch((function(e){console.log(e),n.setErrorMsg("Login Failed!")}))},n.state={roomCode:"",rooms:null,errorMsg:""},n._initFirebase=!1,n.unsubRooms=null,n}(0,r.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.firebase&&!this._initFirebase&&this.loadData()},n.componentDidUpdate=function(e){this.props.firebase&&!this._initFirebase&&this.loadData()},n.componentWillUnmount=function(){"function"==typeof this.unsubRooms&&this.unsubRooms()},n.render=function(){var e=this.state,t=e.rooms,n=e.roomCode,o=e.errorMsg,r=t?t.find((function(e){return e.id===n})):null;return null===r&&""!==n&&this.setErrorMsg("Room not found!"),""===n?i.createElement(i.Fragment,null,i.createElement(p.Z,{title:"Home",route:"/"}),i.createElement(E,null,i.createElement(f.Z,{size:"large"}),i.createElement(d.Z,{setRoomCode:this.setRoomCode,attemptLogin:this.attemptLogin}))):null==r?i.createElement(i.Fragment,null,i.createElement(p.Z,{title:"Home",route:"/"}),i.createElement(E,null,i.createElement(f.Z,{size:"large"}),i.createElement("h1",null," Room not found! "),i.createElement(d.Z,{setRoomCode:this.setRoomCode,attemptLogin:this.attemptLogin}))):""!==o?i.createElement(i.Fragment,null,i.createElement(p.Z,{title:"Home",route:"/"}),i.createElement(E,null,i.createElement(f.Z,{size:"large"}),i.createElement("h1",null," ",this.state.errorMsg," "),i.createElement(d.Z,{setRoomCode:this.setRoomCode,attemptLogin:this.attemptLogin}))):i.createElement(i.Fragment,null,i.createElement(p.Z,{title:"Room",route:"/"}),i.createElement(g.Z,{room:r}))},t}(i.Component),C=(0,u.Pd)(b)}}]);
//# sourceMappingURL=component---src-pages-index-js-18b4e212c46adbbdc0db.js.map